\documentclass{ecnreport}

\stud{Master 1 CORO / Option Robotique}
\topic{Robot Operating System}
\author{O. Kermorgant}

\begin{document}

\inserttitle{Robot Operating System}

\insertsubtitle{Lab 2: the ``mirror arm'' node}

\section{Goals}

Program a node that can move the left arm of the Baxter robot in a symmetric way with respect to
the motion of the right arm (symmetry with respect to the sagittal plane of the robot).
The node should work in position mode. \\

\subsection{On the real robot}

If you are in P-Robotics room, you can do the lab on the real robot. You have to run the bridge in a ROS 1 terminal, then you can work on ROS 2.

\begin{bashcodelarge}
 source ~/ros/baxter.sh # so that your ROSMASTER is on Baxter
 rosrun baxter_simple_sim ros2_bridge.py
\end{bashcodelarge}

You can move Baxter's right arm by grabbing the wrist.

\subsection{In simulation (including virtual machine users)}
The simulation should be started in a ROS 1 console with:
\begin{bashcodelarge}
 roslaunch baxter_simple_sim simulation.launch lab:=mirror
\end{bashcodelarge}
You can then use only ROS 2 terminals.


\section{ROS concepts}

To create the control loop you must get the current \emph{state} of the right arm and send \emph{commands} to 
the left arm. You thus need to subcribe and publish to some topics. To not hesitate to use RViz to compare the frames, some of the joints need to get the \textbf{negative}
value of the other arm.

\section{Tasks}

\begin{itemize}
\item Identify the topics that the node should subscribe and publish to: names, message type
\item Check the online documentation ``ROS 2 C++ topics'' to get the overall syntax. This work requires at least a publisher, a subscriber and a timer
\item Program the node in C++ (and then in Python3 if you feel like it)
\end{itemize}

The package is already created for this lab (\texttt{lab2\_mirror}), you just have to update the C++ file and compile it.\\
Feel free to keep this package as a template for future packages / nodes that you will create.
\end{document}
